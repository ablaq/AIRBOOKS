<h1>My books</h1>
<ul>
  <% @books.each do |book| %>
    <% if book.user == current_user %>
      <%= link_to book_path(book.id) do %>
        <li> <%= book.title %> - <%= book.author%></li>
      <% end  %>
    <% end  %>
  <% end  %>
</ul>

<h1>Rental requests:</h1>

<% @rentals.each do |rental| %>
  <% if rental.book.user == current_user %>
    <h2 class="mt-3"><%= rental.book[:title] %></h2>
    <p><%= rental.start_date %></p>
    <p><%= rental.end_date %></p>
    <p>Status: 
    <% if rental.status == "Pending"%>
      <button class="btn btn-warning"><%= rental.status %></button>
    <% elsif rental.status == "Accepted"%>
      <button class="btn btn-success"><%= rental.status %></button>
    <% elsif rental.status == "Rejected"%>
      <button class="btn btn-danger"><%= rental.status %></button>
    <% end %>
    </p>

    <% if rental.status == "Pending"%>
      <%#= link_to "Accept", validate_rental_path(rental), method: :patch, value: "Accepted" %>

      Change status to: <%= simple_form_for(rental, url: validate_rental_path(rental), html: {method: :patch}) do |f| %>
        <%= f.button :submit, value: "Accepted", placeholder: "Accept", class: "btn btn-outline-dark"%>
      <% end %>

      <%#= link_to "Reject", validate_rental_path(rental), method: :patch, value: "Rejected" %>

      <%= simple_form_for(rental, url: validate_rental_path(rental), html: {method: :patch}) do |f| %>
        <%= f.button :submit, label: "Reject", value: "Rejected", class: "btn btn-outline-dark"%>
      <% end %>


    <% elsif rental.status == "Accepted"%>
      <%= simple_form_for(rental, url: validate_rental_path(rental), html: {method: :patch}) do |f| %>
        <%= f.button :submit, value: "Rejected", class: "btn btn-outline-light"%>
      <% end %>
    <% elsif rental.status == "Rejected"%>
      <%= simple_form_for(rental, url: validate_rental_path(rental), html: {method: :patch}) do |f| %>
        <%= f.button :submit, value: "Accepted", class: "btn btn-outline-light"%>
      <% end %>
    <% end %>
  <% end  %>
<% end  %>


